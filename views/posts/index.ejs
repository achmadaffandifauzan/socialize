<% layout('layouts/boilerplate') %>

<form action="/posts/search" method="GET" class="d-flex findPostIndexPageForm" role="search">
    <input class="form-control me-2" name="q" type="search" placeholder="Find posts, hashtag, or user"
        aria-label="Search" spellcheck="false">
    <button class="btn" type="submit">
        <span class="material-symbols-rounded">
            search
        </span>
    </button>
</form>
<div class="indexContainer">
    <% for (let post of posts) {%>
    <div class="cardIndex col-sm-5 card my-4">

        <div class="card-header">
            <a href="/<%= post.author._id %>" class="ownerName">
                <%=post.author.name%>
            </a>
        </div>
        <a href="/posts/<%=post._id%>" class="text-decoration-none">
            <div class="card-body pb-1">
                <div class="postTitle">
                    <%=post.title%>
                </div>
                <div class="postDescription">
                    <%= post.description %>
                </div>
            </div>
        </a>
        <div class="mb-0 card-body">
            <a href="" class="postHashtag">
                <%= post.hashtag %>
            </a>
        </div>
        <% if (post.images.length>= 1){ %>
        <img src="<%=post.images[0].url%>" class="image-post-index mx-3 my-0" alt="...">
        <% } %>
        <div class="card-footer text-muted fw-light fst-italic text-end font-size-sm small">
            <%= post.dateCreated %>
        </div>

    </div>
    <% } %>
</div>
<!-- <nav class="" aria-label="..."> -->
<ul class="pagination my-3 justify-content-center">
    <li class="page-item">
        <a class="page-link" href="?page=<%= pageBefore %>">&laquo; Previous</a>
    </li>
    <li class="page-item">
        <a class="page-link" href="?page=<%= pageAfter%>">Next &raquo;</a>
    </li>
</ul>
<!-- </nav> -->