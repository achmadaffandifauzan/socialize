<% layout('layouts/boilerplate') %>
<div class="col-sm-6 offset-sm-3 text-center formContainer my-5">
    <h2 class="my-4">Edit Account</h2>
    <form action="/<%= user._id %>/?_method=PUT" method="POST" class="needs-validation formAuth"
        enctype='multipart/form-data' novalidate>
        <div class="form-group mb-3">
            <label for="name" class="my-2">Name</label>
            <input type="text" class="form-control" id="name" name="user[name]" spellcheck="false"
                value="<%= user.name %>" required>
            <div class="invalid-feedback">
                Add your name!
            </div>
        </div>
        <div class="form-group mb-3">
            <label for="email" class="my-2">Email</label>
            <input type="email" class="form-control" id="email" name="user[email]" spellcheck="false"
                value="<%= user.email %>" required>
            <div class="invalid-feedback">
                Add email!
            </div>
        </div>
        <div class="form-group mb-3">
            <label for="username" class="my-2">Username</label>
            <input type="text" class="form-control" id="username" name="user[username]" spellcheck="false"
                value="<%= user.username %>" required>
            <div class="invalid-feedback">
                Add username!
            </div>
        </div>
        <div class="form-group mb-3">
            <label for="password" class="my-2">Current Password</label>
            <input type="password" class="form-control" id="password" name="user[password]" spellcheck="false"
                placeholder="Put your current password" required>
            <div class="invalid-feedback">
                Add password!
            </div>
        </div>
        <div class="form-group mb-3">
            <label for="passwordNew" class="my-2">New Password</label>
            <input type="password" class="form-control" id="passwordNew" name="user[newpassword]" spellcheck="false"
                placeholder="Put new password (optional)">
            <div class="invalid-feedback">
                Invalid Input!
            </div>
        </div>
        <div class="mb-3">
            <label for="profilePicture" class="form-label">Profile Picture</label>
            <input class="form-control" name="user[profilePicture]" type="file" id="profilePicture">
        </div>
        <% if (user.profilePicture) {%>
        <div class="mb-3">
            <div class="text-start">Delete Image : </div>
            <label class="form-check-label mb-3" for="imageDelete">
                <input class="form-check-input " name="deleteProfilePictureFilename" type="checkbox"
                    value="<%= user.profilePicture.filename %>" id="imageDelete"> <br>
                <img src="<%= user.profilePicture.thumbnail %>" class="img-thumbnail" alt="">
            </label>
        </div>
        <% } %>
        <div class="mb-3">
            <label for="backgroundPicture" class="form-label">Background Pircture</label>
            <input class="form-control" name="user[backgroundPicture]" type="file" id="backgroundPicture">
        </div>
        <% if (user.backgroundPicture) {%>
        <div class="mb-3">

            <div class="text-start">Delete Image : </div>
            <label class="form-check-label mb-3" for="imageDelete">
                <input class="form-check-input " name="deleteBackgroundPictureFilename" type="checkbox"
                    value="<%= user.backgroundPicture.filename %>" id="imageDelete"> <br>
                <img src="<%= user.backgroundPicture.thumbnail %>" class="img-thumbnail" alt="">
            </label>
        </div>
        <% } %>
        <div class="text-danger  mt-3">If you upload new image, your current image will be automatically replaced !
        </div>
        <button class="btn btn-success">
            Update
        </button>
        <div class="mt-3">Cancel Update ? <a href="/<%=user._id  %>">Back to Your Account Page</a></div>
    </form>
</div>